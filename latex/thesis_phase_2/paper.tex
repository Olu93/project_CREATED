\documentclass[12pt,a4paper]{report}
% \usepackage{import}
\usepackage{templates/mainpreambel}

\input{references/commands}
\input{references/constants}

% https://en.wikibooks.org/wiki/LaTeX/Glossary
% https://www.overleaf.com/learn/latex/Glossaries
% https://tex.stackexchange.com/questions/199211/differences-between-xindy-and-makeindex
% https://tex.stackexchange.com/a/541990
% https://tools.ietf.org/doc/texlive-doc/latex/glossaries/glossariesbegin.html
\makeglossaries

\DeclareLanguageMapping{american}{american-apa}
% \addbibresource{./references/bibliography.bib}
\addbibresource{./references/autoupdated.bib}
\loadglsentries[acronym]{./references/glossary.tex}
\graphicspath{{figures/}}

\usepackage{subfiles} 
                                                                                         




\begin{document}


%%% Title page
\subfile{content/cover.tex}
\subfile{content/abstract.tex}
% \import{templates/}{abstract.tex}


\tableofcontents
\printglossary[type=acronym, title=List of terms, toctitle=List of terms]

% TODO: Apply title case to all chapters, sections and subsections.
% TODO: Change 'will' to an abbreviated version 

% Status -> Issues -> existing approach -> limitations of approach -> challenge -> RQ 
\chapter{Introduction}
\label{sec:intro}

\section{Motivation}
\label{sec:motivation}
\subfile{content/sections/sec_motivation}

\section{Problem Space}
\label{sec:challenges}
\subfile{content/sections/sec_challenges}

% \section{Outline}
% \label{sec:approaches}
% \subfile{content/sections/sec_approaches}

\section{Related Literature}
\label{sec:literature}
Many researchers have worked on counterfactuals and \Gls{PM}. Here, we will combine the important concepts and discuss the various contributions to this thesis.
\subfile{content/sections/sec_literature}


\section{Research Question}
\label{sec:rq}
As we seek to make data-driven process models interpretable, we have to understand the exact purpose of this thesis. Hence, we will establish the challenges that are open and how this thesis attempts to solve them. 
\subfile{content/sections/sec_rq}


% \import{content/sections/}{sec_issues_01.tex}

\chapter{Background}
\label{ch:prereq}
This chapter explores the most important concepts for this workk. Hence, we will focus on the problem domain, starting with an overview about \Gls{PM}. Afterwards, we discuss the nature of the data, we handle in this thesis by discussing \emph{Multivariate Time-Series}. Next, we introduce counterfactuals and establish how we characterise \emph{viable} counterfactuals. 

\section{Process Mining}
\label{sec:process}
This thesis will focus on processes and the modelling of process generated data. Hence, it is important to establish a common understanding for this field.
\subfile{content/sections/sec_pm}

\section{Multivariate Time-Series Modelling}
\label{sec:sequences}
The temporal and multivariate nature of \gls{instance} often turns \Gls{PM} into a Multivariate Time-Series Modelling problem. Therefore, it is necessary to establish an understanding for this type of data structure.
\subfile{content/sections/sec_mlts}


\section{Counterfactuals}
\label{sec:counterfactuals}
Counterfactuals are an important explanatory tool to understand a models' cause for decisions. Generating counter factuals is main focus of this thesis. Hence, we will establish the most important chateristics of counterfactuals in this section.

\subsection{What are Counterfactuals?}
\subfile{content/sections/sec_counterfactuals_criterions}

% \subsection{Other Criteria}
% \label{sec:other}
% \subfile{content/sections/sec_viability_other}

\subsection{The Challenges of Counterfactual Sequence Generation}
\subfile{content/sections/sec_counterfactuals_challenges}


\section{Formal Definitions}
\label{sec:formulas}
Before diving into the rest of this thesis, we have to establish preliminary definitions, we use in this work. With this definitions, we share a common formal understanding of mathematical descriptions of every concept used within this thesis. 
\subfile{content/sections/sec_formula}

\section{Representation}
\label{sec:representation}
\subfile{content/sections/sec_representation}

\section{Long-Short-Term Memory Models}
\label{sec:lstm}
\subfile{content/sections/sec_lstm}

\section{Damerau-Levenshtein}
\label{sec:damerau}
\subfile{content/sections/sec_damerau}

\section{Evolutionary Algorithms}
\label{sec:evo}
Many of our generative models are based on Evolutionary Algorithms. This section provides a small overview about this optimization technique.  
\subfile{content/sections/sec_evolutionary}


\chapter{Methods}
\label{sec:methods}
In this chapter, we describe details of our framework \attention{Name it} and discuss advantages and limitations. 
Therefore, we we provide a more detailed overview and additionally describe all components. As the framework resembles the work of \citeauthor{hsieh_DiCE4ELInterpretingProcess_2021}, we will also discuss differences and similarities between both solutions. 
  % TODO: Add section references on chapter intros.

\section{Methodological Framework}
\label{sec:framework}
\subsection{Architecture}
\subfile{content/sections/sec_framework}

\subsection{Differences to DiCE4EL}
\subfile{content/sections/sec_dice4el_framework}

\section{Semi-Structured Damerau-Levenshtein \\ Distance}
\label{sec:ssdld}
Before discussing the viability function, we have to introduce an edit-distance for sequences. An edit-distance is used to compute distance between two sequences. Therefore, some distances can take \emph{structural} characteristics of sequences into account. Hence, we show why it is important to take those structures into account and propose a custom edit-distance, which works for business processes.


\subsection{Semi-Structured Damerau Levenshtein}
\subfile{content/sections/sec_viability_ssdld}
\xixi{Are there any remarks about the formulas?}
\subsection{Discussion}
\subfile{content/sections/sec_viability_ssdld_discussion}

\section{Viability Measure}
\label{sec:viability}
In this section we define the components of the metric to measure the validity of a sequence.

\subsection{Similarity-Measure}
\label{sec:similarity}
\subfile{content/sections/sec_viability_similarity}

\subsection{Sparcity-Measure}
\label{sec:sparcity}
\subfile{content/sections/sec_viability_sparsity}

\subsection{Feasibility-Measure}
\label{sec:feasibility}
\subfile{content/sections/sec_viability_feasibility}
% \subsection{Feasibility Model: Markov Model}
% \label{sec:model_feasibility}
\subfile{content/sections/sec_model_feasibility}
\subfile{content/sections/sec_model_feasibility_discussion}

\subsection{Delta-Measure}
\label{sec:delta}
\subfile{content/sections/sec_viability_delta}

\subsection{Discussion}
\subfile{content/sections/sec_viability_closing_part}

\subsection{Differences to DiCE4EL}
\subfile{content/sections/sec_dice4el_viability}
 


\section{Prediction Model: LSTM}
\label{sec:model_prediction}
\subfile{content/sections/sec_model_lstm}


% \subsection{Generative Model: VAE}
% \label{sec:model_vae}
% \subfile{content/sections/sec_model_vae}

\section{Counterfactual Generators}
\label{sec:model_generation}
\subsection{Baseline Model: Random Generator}
\subfile{content/sections/sec_model_random.tex}

\subsection{Baseline Model: Sample-Based Generator}
\subfile{content/sections/sec_model_samplebased.tex}

\subsection{Baseline Model: Case-Based Generator}
\subfile{content/sections/sec_model_casebased.tex}
\xixi{Should I include a baseline which samples from the data distribution?}

\subsection{Generative Model: Evolutionary Algorithm}
\label{sec:model_evolutionary}
\subfile{content/sections/sec_model_evolutionary}

\chapter{Evaluation}
\label{sec:datasets}
In this chapter, we we are going to establish most of the methods, the results section will cover. In detail, we discuss the datasets, we use, the preprocessing pipeline and the final representation for each of the algorithms.


\section{Datasets}
\label{sec:dataset_description}
\subfile{content/sections/sec_dataset_stats}

\section{Preprocessing}
\label{sec:preprocessing}
\subfile{content/sections/sec_dataset_preprocessing}

\section{Approach}
\label{sec:experimental_setup}
\subfile{content/sections/sec_experimental_setup}






\chapter{Results}
\label{sec:results}
This chapter presents the results of each evaluation step. Furthermore, we analyse the results.

% Before testing any model we have to establish two crucial components of the viability measure. First, we require a prediction model which we want to explain using counterfactuals. This is relevant for determining the improvement that a counterfactual yileds in contrast to the factual. Second, we need to know to what extend any given counterfacual is feasbile given the dataset at hand. Therefore, we will dedicate the first set of experiments to establishing these components.

% \section{Determine the Prediction Model}
% \subfile{content/sections/sec_experiment_0_prediction}

% \section{Determine the Feasibility Model}
% \subfile{content/sections/sec_experiment_0_feasibility}



% \subfile{content/sections/sec_experiment_2}
% \subfile{content/sections/sec_experiment_3}
% \subfile{content/sections/sec_experiment_4}
\section{Experiment 1: Model Selection}
\subsection{Model Configuration}
\subsubsection{Results}
\subfile{content/sections/sec_experiment_1_configuration_results}
\subsubsection{Discussion}
\subfile{content/sections/sec_experiment_1_configuration_discussion}
\subsection{Model Termination Point}
\subsubsection{Results}
\subfile{content/sections/sec_experiment_1_termination_results}
\subsubsection{Discussion}
\subfile{content/sections/sec_experiment_1_termination_discussion}
\subsection{Model Parameters}
\subsubsection{Results}
\subfile{content/sections/sec_experiment_1_hyperparams_results}
\subsubsection{Discussion}
\subfile{content/sections/sec_experiment_1_hyperparams_discussion}
\subsection{Model Parameters}
\subsubsection{Discussion}
\subfile{content/sections/sec_experiment_1_xselection}



\section{Experiment 2: Model Comparison}
\label{sec:overall}
In this section we examine the results of each model's average viability across all datasets. 
\subsection{Results}
\subfile{content/sections/sec_experiment_5}
\subsection{Analysis}
\subfile{content/sections/sec_experiment_5_analysis}
% \attention{MENTION the RQ to have an approach which is \emph{process model agnositc}} 
% With these result, we are not able to to claim, that thew model consistently outperforms the other approaches.  Therefore, this section will explore the results on different data-set sizes and types.


\section{Experiment 3: Evaluation under a different Viability Measure}
\subsection{Results}
\subfile{content/sections/sec_experiment_6}
\subsection{Analysis}
\subfile{content/sections/sec_experiment_6_analysis}

\section{Experiment 4: Qualitative Assessment}
\subsection{Results}
\subfile{content/sections/sec_experiment_7}
\subsection{Analysis}
\subfile{content/sections/sec_experiment_7_analysis}


\chapter{Discussion}
\label{sec:dicussion}
In this chapter, we are going to reexamine many of the past decisions we made. We critically assess the results of experiments and how we interpret them. We also propose possible improvements and opportunities for future reasearch.

\section{Interpretation of Results}
\subsection{Model Framework}
No reason to believe the framework doesn't work. Mainly because the case based model has shown that it works. 
\subsection{Viability Measure}
Feasibility modelling could have been better. Second, diversity should have been introduced. For instance by using similarity as a proxy.
\subsection{Evolutionary Algorithm}
Worked fine, but there are most likely better approaches out there.
\subsection{Implications}
We also have to mention that these results reflect the behaviour of the model itself. Whether the model reflects the real process realisticly requires a more extensive research approach. First, we have to ensure the model predicts the real outcome reliably. We showed in this thesis that the test scores are generally high. However, this does not mean that this is the case on real world data. Next, although we our framework does not require any domain knowledge, it is important to evaluate the results with domain experts. 

\section{Proposed Improvements}
\subsection{Better Viability Measure Composition}
The experiment mostly assumed a similar importance of each viability composite. Furthermore, crucial parts such as diversity where missing.
\subsection{Employ Modern Evolutionary Algorithm Techniques like CMA-ES}

\section{Future Work}
\subsection{The Effects of using other Viability Measures}
It would be interesting to see the out put of using \citeauthor{hsieh_DiCE4ELInterpretingProcess_2021}'s way to measure viability.
\subsection{Inclusion of a better Measure for Sequential Feasibility}
If the measure is probabilistic one could try to compute the expected probability given the sequence instead of just the probability.
Furthermore, one could measure the feasibility by employing perplexity or another NLP evaluation metric. 



\chapter{Conclusion}
\label{sec:conclusion}

% \glsaddall % Just to add all glossary entries, for exemplary purposes

\printbibliography

\appendix

\end{document}

